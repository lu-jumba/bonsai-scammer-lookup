import { BadlyFormattedAddressError, IdentityProviderAddressInvalidError, ProtocolNotSupportedError, ProtocolType } from '@mailchain/addressing';
import { PublicKey } from '@mailchain/crypto';
import { IdentityKeysApiInterface, AddressesApiInterface } from '@mailchain/api';
import { MessagingKeyVerificationError } from '@mailchain/signatures';
import { Configuration } from '../configuration';
import { MailchainResult } from '../';
import { MessagingKeyContactError, IdentityNotFoundError, UnexpectedMailchainError, IdentityProviderUnsupportedError, IdentityProviderAddressUnsupportedError, IdentityExpiredError } from './errors';
import { MessagingKeyProof } from './proof';
import { MessagingKeyContractCall } from './messagingKeyContract';
type BaseResolvedAddress = {
    /** Messaging key to be used when communicate with the resolved address. See {@link PublicKey} */
    messagingKey: PublicKey;
    /** Protocol of resolved address. Protocol is determined when resolving the address. */
    protocol: ProtocolType;
    /** Identity key of resolved address. Identity key might be undefined in the case of `vended` messaging key. */
    identityKey?: PublicKey;
    /** Protocol address that has been resolved in the case of name services. */
    protocolAddress: string;
};
export type AddressMessagingKeyStatus = 'vended' | 'registered';
export type RegisteredResolvedAddress = BaseResolvedAddress & {
    /** Indicates the messaging key has been registered by a user. */
    type: 'registered';
};
export type VendedResolvedAddress = BaseResolvedAddress & {
    /** Indicates the messaging key has been vended by Mailchain. */
    type: 'vended';
};
/**
 * Resolved address response containing a proven messaging key.
 */
export type ResolvedAddress = RegisteredResolvedAddress | VendedResolvedAddress;
export type ResolveAddressError = UnexpectedMailchainError | BadlyFormattedAddressError | IdentityExpiredError | IdentityNotFoundError | IdentityProviderUnsupportedError | IdentityProviderAddressUnsupportedError | MessagingKeyContactError | MessagingKeyVerificationError | ProtocolNotSupportedError | IdentityProviderAddressInvalidError;
export type ResolveAddressResult = MailchainResult<ResolvedAddress, ResolveAddressError>;
export type ResolvedManyAddresses = Map<string, ResolvedAddress>;
export type ResolvedManyAddressesResult = MailchainResult<ResolvedManyAddresses>;
export type ResolveManyAddressesError = ResoleAddressesFailuresError;
export declare class ResoleAddressesFailuresError extends Error {
    readonly successes: Array<{
        params: string;
        data: ResolvedAddress;
    }>;
    readonly failures: Array<{
        params: string;
        error: ResolveAddressError;
    }>;
    readonly type = "resolve_addresses_failures";
    readonly docs = "https://docs.mailchain.com/developer/errors/codes#resolve_addresses_failures";
    constructor(successes: Array<{
        params: string;
        data: ResolvedAddress;
    }>, failures: Array<{
        params: string;
        error: ResolveAddressError;
    }>);
}
export declare class MessagingKeys {
    private readonly addressApi;
    private readonly identityKeysApi;
    private readonly messagingKeyContractCall;
    private readonly mailchainAddressDomain;
    constructor(addressApi: AddressesApiInterface, identityKeysApi: IdentityKeysApiInterface, messagingKeyContractCall: MessagingKeyContractCall, mailchainAddressDomain: string);
    static create(configuration: Configuration): MessagingKeys;
    /**
     * Resolve the messaging key for the given address.
     *
     * @param address Address to resolve.
     *
     * @returns A {@link ResolvedAddress resolved address} which may be a registered or vended.
     *
     * @example
     * import { messagingKeys } from '@mailchain/sdk';
     *
     * const resolvedAddress = await messagingKeys.resolve(address);
     * console.log(resolvedAddress);
     *
     */
    resolve(address: string): Promise<ResolveAddressResult>;
    resolveMany(addresses: string[]): Promise<MailchainResult<ResolvedManyAddresses, ResolveManyAddressesError>>;
    update(proof: MessagingKeyProof): Promise<void>;
    private getAddressMessagingKey;
    getAddressMessagingKeyStatus(address: string): Promise<MailchainResult<AddressMessagingKeyStatus, IdentityProviderUnsupportedError>>;
}
export {};
