'use strict';

var encoding = require('@mailchain/encoding');
var _const = require('./const.js');
var delegatedAddress = require('./delegatedAddress.js');

function validateFilecoinAddress(address) {
    if (address.length < 42 && address.length > 49) {
        return false;
    }
    else if (!address.startsWith(_const.FILECOIN_PREFIX_F4_ETHEREUM) && !address.startsWith(_const.FILECOIN_PREFIX_T4_ETHEREUM)) {
        return false;
    }
    else if (!encoding.isBase32(address.slice(4))) {
        return false;
    }
    return delegatedAddress.convertFilDelegatedAddressToEthAddress(address).error === undefined;
}

exports.validateFilecoinAddress = validateFilecoinAddress;
