import { isBase32 } from '@mailchain/encoding';
import { FILECOIN_PREFIX_F4_ETHEREUM, FILECOIN_PREFIX_T4_ETHEREUM } from './const.js';
import { convertFilDelegatedAddressToEthAddress } from './delegatedAddress.js';

function validateFilecoinAddress(address) {
    if (address.length < 42 && address.length > 49) {
        return false;
    }
    else if (!address.startsWith(FILECOIN_PREFIX_F4_ETHEREUM) && !address.startsWith(FILECOIN_PREFIX_T4_ETHEREUM)) {
        return false;
    }
    else if (!isBase32(address.slice(4))) {
        return false;
    }
    return convertFilDelegatedAddressToEthAddress(address).error === undefined;
}

export { validateFilecoinAddress };
